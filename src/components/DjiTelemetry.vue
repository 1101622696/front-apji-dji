<script setup>
import { onMounted, ref } from "vue";
import axios from "axios";

const telemetry = ref(null);
const errorMessage = ref("");

onMounted(() => {
  axios.get("https://backend-dji.onrender.com/api/telemetry") // Llamada al backend
    .then(response => {
      telemetry.value = response.data;
      console.log("📡 Telemetría recibida:", response.data);
    })
    .catch(error => {
      console.error("❌ Error obteniendo datos de telemetría:", error);
      errorMessage.value = "No se pudo obtener telemetría";
    });
});
</script>

<template>
  <q-page class="q-pa-md">
    <q-card>
      <q-card-section>
        <h1>📡 Telemetría del Dron</h1>
        <q-banner v-if="errorMessage" dense class="bg-red text-white">
          ⚠ {{ errorMessage }}
        </q-banner>
        <q-list v-if="telemetry">
          <q-item>
            <q-item-section>🚀 Estado: {{ telemetry }}</q-item-section>
          </q-item>
        </q-list>
      </q-card-section>
    </q-card>
  </q-page>
</template>
